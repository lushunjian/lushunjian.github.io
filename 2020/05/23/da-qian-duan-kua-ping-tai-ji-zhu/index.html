<!DOCTYPE HTML>
<html lang="en">


<head>
    <meta charset="utf-8">
    <meta name="keywords" content="大前端跨平台技术, 木子李">
    <meta name="description" content="在移动互联网时代，任何一个公司的产品都少不了APP，这是人们生活水平提高的结果。随着智能手机越来越普及，移动端成为兵家必争之地。正所谓“得移动端者得天下”，移动端已成为互联网领域最大的流量分发入口，一大批互联网公司正是在这大趋势下崛起。但在">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <meta name="renderer" content="webkit|ie-stand|ie-comp">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="format-detection" content="telephone=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <title>大前端跨平台技术 | 木子李</title>
    <link rel="icon" type="image/jpeg" href="/avent.jpg">

    <link rel="stylesheet" type="text/css" href="/libs/awesome/css/all.css">
    <link rel="stylesheet" type="text/css" href="/libs/materialize/materialize.min.css">
    <link rel="stylesheet" type="text/css" href="/libs/aos/aos.css">
    <link rel="stylesheet" type="text/css" href="/libs/animate/animate.min.css">
    <link rel="stylesheet" type="text/css" href="/libs/lightGallery/css/lightgallery.min.css">
    <link rel="stylesheet" type="text/css" href="/css/matery.css">
    <link rel="stylesheet" type="text/css" href="/css/my.css">

    <script src="/libs/jquery/jquery.min.js"></script>
    
<meta name="generator" content="Hexo 4.2.0"><link rel="stylesheet" href="/css/prism-tomorrow.css" type="text/css"></head>


<body>
    <header class="navbar-fixed">
    <nav id="headNav" class="bg-color nav-transparent">
        <div id="navContainer" class="nav-wrapper container">
            <div class="brand-logo">
                <a href="/" class="waves-effect waves-light">
                    
                    <img src="/medias/avent.jpg" class="logo-img" alt="LOGO">
                    
                    <span class="logo-span">木子李</span>
                </a>
            </div>
            

<a href="#" data-target="mobile-nav" class="sidenav-trigger button-collapse"><i class="fas fa-bars"></i></a>
<ul class="right nav-menu">
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/" class="waves-effect waves-light">
      
      <i class="fas fa-home" style="zoom: 0.6;"></i>
      
      <span>首页</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/tags" class="waves-effect waves-light">
      
      <i class="fas fa-tags" style="zoom: 0.6;"></i>
      
      <span>标签</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/categories" class="waves-effect waves-light">
      
      <i class="fas fa-bookmark" style="zoom: 0.6;"></i>
      
      <span>分类</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/archives" class="waves-effect waves-light">
      
      <i class="fas fa-archive" style="zoom: 0.6;"></i>
      
      <span>归档</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/about" class="waves-effect waves-light">
      
      <i class="fas fa-user-circle" style="zoom: 0.6;"></i>
      
      <span>关于</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/contact" class="waves-effect waves-light">
      
      <i class="fas fa-comments" style="zoom: 0.6;"></i>
      
      <span>留言</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/friends" class="waves-effect waves-light">
      
      <i class="fas fa-address-book" style="zoom: 0.6;"></i>
      
      <span>友链</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="" class="waves-effect waves-light">

      
      <i class="fas fa-list" style="zoom: 0.6;"></i>
      
      <span>Medias</span>
      <i class="fas fa-chevron-down" aria-hidden="true" style="zoom: 0.6;"></i>
    </a>
    <ul class="sub-nav menus_item_child ">
      
      <li>
        <a href="/galleries">
          
          <i class="fas fa-image" style="margin-top: -20px; zoom: 0.6;"></i>
          
          <span>相册</span>
        </a>
      </li>
      
      <li>
        <a href="/movies">
          
          <i class="fas fa-film" style="margin-top: -20px; zoom: 0.6;"></i>
          
          <span>电影</span>
        </a>
      </li>
      
      <li>
        <a href="/books">
          
          <i class="fas fa-book" style="margin-top: -20px; zoom: 0.6;"></i>
          
          <span>书籍</span>
        </a>
      </li>
      
      <li>
        <a href="/games">
          
          <i class="fas fa-puzzle-piece" style="margin-top: -20px; zoom: 0.6;"></i>
          
          <span>游戏</span>
        </a>
      </li>
      
      <li>
        <a href="/my-games">
          
          <i class="fas fa-flag" style="margin-top: -20px; zoom: 0.6;"></i>
          
          <span>撸毛</span>
        </a>
      </li>
      
    </ul>
    
  </li>
  
  <li>
    <a href="#searchModal" class="modal-trigger waves-effect waves-light">
      <i id="searchIcon" class="fas fa-search" title="Search" style="zoom: 0.85;"></i>
    </a>
  </li>
</ul>

<div id="mobile-nav" class="side-nav sidenav">

    <div class="mobile-head bg-color">
        
        <img src="/medias/avent.jpg" class="logo-img circle responsive-img">
        
        <div class="logo-name">木子李</div>
        <div class="logo-desc">
            
            爱我所爱，行我所行，听从我心，无问西东
            
        </div>
    </div>

    

    <ul class="menu-list mobile-menu-list">
        
        <li class="m-nav-item">
	  
		<a href="/" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-home"></i>
			
			首页
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/tags" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-tags"></i>
			
			标签
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/categories" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-bookmark"></i>
			
			分类
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/archives" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-archive"></i>
			
			归档
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/about" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-user-circle"></i>
			
			关于
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/contact" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-comments"></i>
			
			留言
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/friends" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-address-book"></i>
			
			友链
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="javascript:;">
			
				<i class="fa-fw fas fa-list"></i>
			
			Medias
			<span class="m-icon"><i class="fas fa-chevron-right"></i></span>
		</a>
            <ul  style="background:  ;" >
              
                <li>   
				
                  <a href="/galleries " style="margin-left:75px";>
				  
				   <i class="fa fas fa-image" style="position: absolute;left:50px" ></i>
			      
		          <span>相册</span>
                  </a>
                </li>
              
                <li>   
				
                  <a href="/movies " style="margin-left:75px";>
				  
				   <i class="fa fas fa-film" style="position: absolute;left:50px" ></i>
			      
		          <span>电影</span>
                  </a>
                </li>
              
                <li>   
				
                  <a href="/books " style="margin-left:75px";>
				  
				   <i class="fa fas fa-book" style="position: absolute;left:50px" ></i>
			      
		          <span>书籍</span>
                  </a>
                </li>
              
                <li>   
				
                  <a href="/games " style="margin-left:75px";>
				  
				   <i class="fa fas fa-puzzle-piece" style="position: absolute;left:50px" ></i>
			      
		          <span>游戏</span>
                  </a>
                </li>
              
                <li>   
				
                  <a href="/my-games " style="margin-left:75px";>
				  
				   <i class="fa fas fa-flag" style="position: absolute;left:50px" ></i>
			      
		          <span>撸毛</span>
                  </a>
                </li>
               
            </ul>
          
        </li>
        
        
        <li><div class="divider"></div></li>
        <li>
            <a href="https://github.com/blinkfox/hexo-theme-matery" class="waves-effect waves-light" target="_blank">
                <i class="fab fa-github-square fa-fw"></i>Fork Me
            </a>
        </li>
        
    </ul>
</div>

        </div>

        
            <style>
    .nav-transparent .github-corner {
        display: none !important;
    }

    .github-corner {
        position: absolute;
        z-index: 10;
        top: 0;
        right: 0;
        border: 0;
        transform: scale(1.1);
    }

    .github-corner svg {
        color: #0f9d58;
        fill: #fff;
        height: 64px;
        width: 64px;
    }

    .github-corner:hover .octo-arm {
        animation: a 0.56s ease-in-out;
    }

    .github-corner .octo-arm {
        animation: none;
    }

    @keyframes a {
        0%,
        to {
            transform: rotate(0);
        }
        20%,
        60% {
            transform: rotate(-25deg);
        }
        40%,
        80% {
            transform: rotate(10deg);
        }
    }
</style>

<a href="https://github.com/blinkfox/hexo-theme-matery" class="github-corner tooltipped hide-on-med-and-down" target="_blank"
   data-tooltip="Fork Me" data-position="left" data-delay="50">
    <svg viewBox="0 0 250 250" aria-hidden="true">
        <path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path>
        <path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2"
              fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path>
        <path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z"
              fill="currentColor" class="octo-body"></path>
    </svg>
</a>
        
    </nav>

</header>

    



<div class="bg-cover pd-header post-cover" style="background-image: url('/medias/featureimages/37.jpg')">
    <div class="container" style="right: 0px;left: 0px;">
        <div class="row">
            <div class="col s12 m12 l12">
                <div class="brand">
                    <h1 class="description center-align post-title">大前端跨平台技术</h1>
                </div>
            </div>
        </div>
    </div>
</div>




<main class="post-container content">

    
    <link rel="stylesheet" href="/libs/tocbot/tocbot.css">
<style>
    #articleContent h1::before,
    #articleContent h2::before,
    #articleContent h3::before,
    #articleContent h4::before,
    #articleContent h5::before,
    #articleContent h6::before {
        display: block;
        content: " ";
        height: 100px;
        margin-top: -100px;
        visibility: hidden;
    }

    #articleContent :focus {
        outline: none;
    }

    .toc-fixed {
        position: fixed;
        top: 64px;
    }

    .toc-widget {
        width: 345px;
        padding-left: 20px;
    }

    .toc-widget .toc-title {
        margin: 35px 0 15px 0;
        padding-left: 17px;
        font-size: 1.5rem;
        font-weight: bold;
        line-height: 1.5rem;
    }

    .toc-widget ol {
        padding: 0;
        list-style: none;
    }

    #toc-content {
        height: calc(100vh - 250px);
        overflow: auto;
    }

    #toc-content ol {
        padding-left: 10px;
    }

    #toc-content ol li {
        padding-left: 10px;
    }

    #toc-content .toc-link:hover {
        color: #42b983;
        font-weight: 700;
        text-decoration: underline;
    }

    #toc-content .toc-link::before {
        background-color: transparent;
        max-height: 25px;
    }

    #toc-content .is-active-link {
        color: #42b983;
    }

    #toc-content .is-active-link::before {
        background-color: #42b983;
    }

    #floating-toc-btn {
        position: fixed;
        right: 15px;
        bottom: 76px;
        padding-top: 15px;
        margin-bottom: 0;
        z-index: 998;
    }

    #floating-toc-btn .btn-floating {
        width: 48px;
        height: 48px;
    }

    #floating-toc-btn .btn-floating i {
        line-height: 48px;
        font-size: 1.4rem;
    }
</style>
<div class="row">
    <div id="main-content" class="col s12 m12 l9">
        <!-- 文章内容详情 -->
<div id="artDetail">
    <div class="card">
        <div class="card-content article-info">
            <div class="row tag-cate">
                <div class="col s7">
                    
                    <div class="article-tag">
                        
                            <a href="/tags/%E5%89%8D%E7%AB%AF/">
                                <span class="chip bg-color">前端</span>
                            </a>
                        
                    </div>
                    
                </div>
                <div class="col s5 right-align">
                    
                    <div class="post-cate">
                        <i class="fas fa-bookmark fa-fw icon-category"></i>
                        
                            <a href="/categories/%E5%89%8D%E7%AB%AF/" class="post-category">
                                前端
                            </a>
                        
                    </div>
                    
                </div>
            </div>

            <div class="post-info">
                
                <div class="post-date info-break-policy">
                    <i class="far fa-calendar-minus fa-fw"></i>Publish Date:&nbsp;&nbsp;
                    2020-05-23
                </div>
                

                

                

                

                
            </div>

        </div>
        <hr class="clearfix">
        <div class="card-content article-card-content">
            <div id="articleContent">
                <p>在移动互联网时代，任何一个公司的产品都少不了APP，这是人们生活水平提高的结果。随着智能手机越来越普及，移动端成为兵家必争之地。正所谓“得移动端者得天下”，移动端已成为互联网领域最大的流量分发入口，一大批互联网公司正是在这大趋势下崛起。但在移动端刚出来那会儿，Android、iOS都是各自为营，分开开发的，团队之间是独立的，从需求调研，研发，测试，上线一整套流程需要的周期很长，少则几个月，多达1年甚至更长。这样的项目周期满足不了高速迭代发展的需求，伴随着移动互联网的高速发展，公司间竞争越来越激烈，如何将好想法快速落地、快速试错，成为备受关注的问题。因为只有尽快占领市场，才能在移动互联网中分得一杯羹。在这种场景下，跨平台框架应运而生</p>
<p><img src="/2020/05/23/da-qian-duan-kua-ping-tai-ji-zhu/1.jpg" alt></p>
<p>众所周知，Android 应用采用 Java 或 Kotlin 编写，iOS 应用采用 Objective-C 或 Swift 编写，Web 端采用 HTML /CSS/JavaScript 编写。当需要开发支持多端的应用，每一端都需要独立研发、测试，一直到上线，以及后续的维护工作，工作量成倍增涨，势必延长研发周期。因此跨平台框架的出现是为了解决多端独立开发，开发维护成本高，项目周期长的问题。</p>
<h2 id="几种APP开发模式"><a href="#几种APP开发模式" class="headerlink" title="几种APP开发模式"></a>几种APP开发模式</h2><p>主流应用程序大体分为四大类型：Native App、Hybrid App 、Web App，随着大前端的流行又衍生出很多跨平台解决方案和框架。什么是大前端：大前端是指移动端（主要是安卓和IOS），PC端（主要是网页web），小程序，也包括车载终端等客户端。随着终端越来越多于是出现了跨平台应用，跨平台应用就是实现一套前端代码，可以在PC端，IOS端，安卓端，还有其他终端（如果车载终端等）完美运行的应用，人们称之为跨平台应用。</p>
<h3 id="Native-App"><a href="#Native-App" class="headerlink" title="Native App"></a>Native App</h3><p>只用平台原生的开发语言，开发框架来做开发APP。是一种基于智能手机本地操作系统如iOS、Android、WP并使用原生程式编写运行的应用程序。由于是原生开发，性能比较好可以直接调用摄像头，蓝牙等硬件。 这种原生程序一般依托于操作系统，有很强的交互，是一个完整的App，可拓展性强。缺点是对于不同的操作系统需要使用特定的语言开发，不具备移植性，IOS系统开发语言：<code>Objective-C / Swift</code>。Android系统 开发语言：<code>Java / Kotlin</code></p>
<p><strong>优点</strong>：</p>
<ol>
<li>直接依托于操作系统，交互性最强，性能最好，体验是最优。</li>
<li>功能最为强大，特别是在与系统交互中，几乎所有功能都能实现</li>
</ol>
<p><strong>缺点</strong>：</p>
<ol>
<li>开发成本高,无法跨平台，不同平台Android和iOS上都要各自独立开发</li>
<li>门槛较高,原生人员有一定的入门门槛。相比广大的前端人员而言，较少</li>
<li>更新缓慢,特别是发布应用商店后，需要等到审核周期。原生应用更新是一个很大的问题，Android中还能直接下载整包APK进行更新，但在IOS中，如果是发布AppStore,必须通过AppStore地址更新,而每次更新都需要审核,所以无法达到及时更新</li>
<li>维护成本高</li>
</ol>
<h3 id="Hybrid-App"><a href="#Hybrid-App" class="headerlink" title="Hybrid App"></a>Hybrid App</h3><p>用 JS+H5 开发应用的技术，可以通过某种手段调用系统能力。从原生开发者的角度，混合应用其实就是一个原生开发的 App 外壳，这个外壳将原生功能封装成很多 API 并注入到 WebView 里，然后将前端页面打包进 App，App 启动时用 WebView 加载前端页面，剩下的就全交给前端了。混合应用框架的本质就是这个原生 App 外壳，这个外壳重点实现三件事，只要做到这三件事，基本上就可以被称为混合开发通用框架。</p>
<ol>
<li>实现原生与前端（Javascript）的交互</li>
<li>封装基本的原生功能，供前端调用</li>
<li>实现原生插件机制，供原生开发者扩展功能</li>
</ol>
<p>简而言之，在Hybrid模式下，由原生提供统一的API给JS调用，实际的主要逻辑有Html和JS来完成,而由于最终是放在webview中显示的，所以只需要写一套代码即可。</p>
<p><strong>优点</strong>：</p>
<ol>
<li>开发成本较低,可以跨平台,调试方便，前端人员稍微学习下JS api的调用即可,无需两个独立的原生人员。一般Hybrid中的跨平台最少可以跨三个平台:Android App,iOS App,普通webkit浏览器</li>
<li>维护成本低,功能可复用，如果代码合理，只需要一名前端就可以维护多个app,而且很多功能还可以互相复用</li>
<li>更新较为自由，虽然没有Web App更新那么快速,但是Hybrid中也可以通过原生提供api，进行资源主动下载，达到只更新资源文件，不更新apk(ipa)的效果</li>
<li>针对新手友好，学习成本较低。这种开发模式下，只需要前端人员关注一些原生提供的API，具体的实现无需关心，没有新的学习内容，只需要前端人员即可开发</li>
<li>功能更加完善，性能和体验要比起web app好太多。因为可以调用原生api，所以很多功能只要原生提供出就可以实现，另外性能也比较接近原生了</li>
<li>部分性能要求的页面可用原生实现。这应该是Hybrid模式的最多一个好处了，因为这种模式是原生混合web，所以我们完全可以将交互强，性能要求高的页面用原生写，然后一些其它页面用JS写，嵌入webview中以达到最佳体验</li>
</ol>
<p><strong>缺点</strong>：</p>
<ol>
<li>相比原生，性能仍然有较大损耗。这种模式受限于webview的性能桎梏，相比原生而言有不少损耗，体验无法和原生相比。不过相比于原生的诸多优点，这个缺点显然可以接受</li>
<li>不适用于交互性较强的App，这种模式的主要使用一些新闻阅读类，信息展示类的App。但是不适用于一些交互较强或者性能要求较高的App</li>
</ol>
<h3 id="Web-App"><a href="#Web-App" class="headerlink" title="Web App"></a>Web App</h3><p>指采用H5语言写出的App，不需要下载安装。类似于现在所说的轻应用，生存在浏览器中的应用，可以说是触屏版的网页应用。类比于电脑网页中的应用，只是移动端有触屏和手势。Web App生存于浏览器里，宿主是浏览器。对比与原生应用缺点也很明显，因为web App实际上就是手机上的网页，依赖于浏览器内核，无法调用系统权限如地理信息，通讯录，语音，摄像头等等。而且由于不同的浏览器身的属性不尽相同，如浏览器自带的手势，页面切换方式，链接跳转方式，存在版本兼容问题等等</p>
<p><strong>优点</strong>：</p>
<ol>
<li>开发成本低,可以跨平台，调试方便。Web App一般只需要一个前端人员开发出一套代码，然后即可应用于各大主流浏览器(特殊情况可以代码进行下兼容)。没有新的学习成本，而且可以直接在浏览器中调试。</li>
<li>维护成本低</li>
<li>更新最为快速，由于web app资源是直接部署在服务器端的，所以只需要替换服务器端的文件，用户访问是就已经更新了(当然需要解决一些缓存问题)</li>
<li>无需安装App,不会占用手机内存，通过浏览器即可访问,无需安装,用户就会比较愿意去用</li>
</ol>
<p><strong>缺点</strong>：</p>
<ol>
<li>性能低，用户体验差，由于是直接通过的浏览器访问，所以无法使用原生的API，操作体验不好。而且由于依赖于浏览器，部分手势还可能和浏览器的手势冲突</li>
<li>依赖于网络,页面访问速度慢，耗费流量。Web App每次访问都需要去服务端加载资源访问，所以必须依赖于网络。而且网速慢时访问速度很不理想，特别是在移动端，如果网站优化不好会无故消耗大量流量</li>
<li>功能受限，大量功能无法实现。只能使用Html5的一些特殊api，无法调用原生API，所以很多功能存在无法实现情况</li>
<li>临时性入口，用户留存率低。这既是它的优点，也是缺点，优点是无需安装。确定是用完后有时候很难再找到，或者说很难专门为某个web app留存一个入口，导致用户很难再次使用</li>
</ol>
<h3 id="React-Native-App"><a href="#React-Native-App" class="headerlink" title="React Native App"></a>React Native App</h3><p> Facebook发起的开源的一套新的APP开发方案，Facebook在当初深入研究Hybrid开发后，觉得这种模式有先天的缺陷，所以果断放弃，转而自行研究，后来推出了自己的“React Native”方案，不同于H5，也不同于原生，更像是用JS写出原生应用。用 javascript语言就能同时编写 ios，android，以及后台的一项技术。用React Native 就是真正意义上的全栈，一个项目从头到尾可以一个人搞定。一开始我以为React Native App属于Hybrid App。因为它们都使用JS写应用，只不过Hybrid App用WebView 实现，而React Native App自己写了一个引擎实现。但其实不是，在开发的角度来说，两者使用起来差不太多，都可以用JS写App，但是React Native App编译之后生成的是原生的控件，所以是原生应用。但开发模式上与原生App差别又很大，应该说是一种跨平台解决方案的新思路，其实很多大公司都已经在使用React Native开发了</p>
<p><strong>优点</strong>：</p>
<ol>
<li>开发人员单一技术栈，一次学习，跨平台开发。这种模式是统一由JS编写，有着独特的语法，所以只需要学习一次，即可同时开发Android和iOS</li>
<li>相对Hybird app或者Webapp。不用Webview，彻底摆脱了Webview让人不爽的交互和性能问题，有较强的扩展性，这是因为Native端提供的是基本控件，JS可以自由组合使用可以直接使用Native原生的动画（在FB Group这个app里面，面板滑出带一点果冻弹动，面板基于某个点展开这种动画随处可见，这种动画用Native code来做小菜一碟，但是用Web来做就难上加难）。</li>
<li>相对于Native App。可以通过更新远端JS，直接更新app，不过这快成为各家大型Native app的标配了</li>
<li>社区繁荣，遇到问题容易解决。这应该是React Native的很大一个优势,不像Hybrid模式和原生模式一样各自为营，这种模式是Facebook统一发起的,所以有一个统一的社区，里面有大量资源和活跃的人员，对开发者很友好</li>
<li>性能体验高于Hybrid，不逊色与原生。这种模式和Hybrid不一样，Hybrid中的view层实际上还是dom，但是这种模式的view层是虚拟dom，所以性能要高于Hybrid，距离原生差距不大。这种模式可以认为是用JS写原生，即页面用JS写，然后原生通过Bridge技术分析JS,将JS内容单独渲染成原生Android和iOS，所以也就是为什么性能不逊色原生</li>
</ol>
<p><strong>缺点</strong>：</p>
<ol>
<li>从Native到Web，要做很多概念转换，势必造成双方都要妥协。最终web要用一套CSS的阉割版，Native要费劲地把这个阉割版转换成native原生的表达方式（比如iOS的Constraint\origin\Center等属性），两边都会不爽</li>
<li>虽然可以部分跨平台，但并不是Hybrid中的一次编写，两次运行那种，而是不同平台代码有所区别。这种模式实际上还是JS来写原生，所以Android和iOS中的原生代码会有所区别，如果需要跨平台，对开发人员有一定要求。</li>
</ol>
<h2 id="WebView简介"><a href="#WebView简介" class="headerlink" title="WebView简介"></a>WebView简介</h2><p>为了理解Hybrid App与React Native App的区别，你不得不知道的组件就是WebView。Android WebView在Android平台上是一个特殊的View， 基于webkit引擎、展现web页面的控件，这个类可以被用来在你的app中仅仅显示一张在线的网页，还可以用来开发浏览器。WebView内部实现是采用渲染引擎来展示view的内容，提供网页前进后退，网页放大，缩小，搜索。现在很多<code>App</code>里都内置了Web网页（<code>Hybrid App</code>），比如说很多电商平台，淘宝、京东、聚划算等等，如下图</p>
<p><img src="/2020/05/23/da-qian-duan-kua-ping-tai-ji-zhu/2.jpg" alt="京东首页"></p>
<p>Android的Webview在低版本和高版本采用了不同的webkit版本内核，4.4后直接使用了Chrome。WebView控件功能强大，除了具有一般View的属性和设置外，还可以对url请求、页面加载、渲染、页面交互进行强大的处理。</p>
<h3 id="Webview类常用方法"><a href="#Webview类常用方法" class="headerlink" title="Webview类常用方法"></a>Webview类常用方法</h3><p>加载url，加载方式根据资源分为三种，如下</p>
<pre class=" language-java"><code class="language-java">
  <span class="token comment" spellcheck="true">//方式1. 加载一个网页：</span>
  webView<span class="token punctuation">.</span><span class="token function">loadUrl</span><span class="token punctuation">(</span><span class="token string">"http://www.google.com/"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token comment" spellcheck="true">//方式2：加载apk包中的html页面</span>
  webView<span class="token punctuation">.</span><span class="token function">loadUrl</span><span class="token punctuation">(</span><span class="token string">"file:///android_asset/test.html"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token comment" spellcheck="true">//方式3：加载手机本地的html页面</span>
   webView<span class="token punctuation">.</span><span class="token function">loadUrl</span><span class="token punctuation">(</span><span class="token string">"content://com.android.htmlfileprovider/sdcard/test.html"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

   <span class="token comment" spellcheck="true">// 方式4： 加载 HTML 页面的一小段内容</span>
  WebView<span class="token punctuation">.</span><span class="token function">loadData</span><span class="token punctuation">(</span>String data<span class="token punctuation">,</span> String mimeType<span class="token punctuation">,</span> String encoding<span class="token punctuation">)</span>
<span class="token comment" spellcheck="true">// 参数说明：</span>
<span class="token comment" spellcheck="true">// 参数1：需要截取展示的内容</span>
<span class="token comment" spellcheck="true">// 内容里不能出现 ’#’, ‘%’, ‘\’ , ‘?’ 这四个字符，若出现了需用 %23, %25, %27, %3f 对应来替代，否则会出现异常</span>
<span class="token comment" spellcheck="true">// 参数2：展示内容的类型</span>
<span class="token comment" spellcheck="true">// 参数3：字节码</span></code></pre>
<p>WebView的状态</p>
<pre class=" language-java"><code class="language-java"><span class="token comment" spellcheck="true">//激活WebView为活跃状态，能正常执行网页的响应</span>
webView<span class="token punctuation">.</span><span class="token function">onResume</span><span class="token punctuation">(</span><span class="token punctuation">)</span> ；

<span class="token comment" spellcheck="true">//当页面被失去焦点被切换到后台不可见状态，需要执行onPause</span>
<span class="token comment" spellcheck="true">//通过onPause动作通知内核暂停所有的动作，比如DOM的解析、plugin的执行、JavaScript执行。</span>
webView<span class="token punctuation">.</span><span class="token function">onPause</span><span class="token punctuation">(</span><span class="token punctuation">)</span>；

<span class="token comment" spellcheck="true">//当应用程序(存在webview)被切换到后台时，这个方法不仅仅针对当前的webview而是全局的全应用程序的webview</span>
<span class="token comment" spellcheck="true">//它会暂停所有webview的layout，parsing，javascripttimer。降低CPU功耗。</span>
webView<span class="token punctuation">.</span><span class="token function">pauseTimers</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token comment" spellcheck="true">//恢复pauseTimers状态</span>
webView<span class="token punctuation">.</span><span class="token function">resumeTimers</span><span class="token punctuation">(</span><span class="token punctuation">)</span>；

<span class="token comment" spellcheck="true">//销毁Webview</span>
<span class="token comment" spellcheck="true">//在关闭了Activity时，如果Webview的音乐或视频，还在播放。就必须销毁Webview</span>
<span class="token comment" spellcheck="true">//但是注意：webview调用destory时,webview仍绑定在Activity上</span>
<span class="token comment" spellcheck="true">//这是由于自定义webview构建时传入了该Activity的context对象</span>
<span class="token comment" spellcheck="true">//因此需要先从父容器中移除webview,然后再销毁webview:</span>
rootLayout<span class="token punctuation">.</span><span class="token function">removeView</span><span class="token punctuation">(</span>webView<span class="token punctuation">)</span><span class="token punctuation">;</span> 
webView<span class="token punctuation">.</span><span class="token function">destroy</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<h3 id="Webview与-Js的交互"><a href="#Webview与-Js的交互" class="headerlink" title="Webview与 Js的交互"></a>Webview与 Js的交互</h3><p>Webview既然能够嵌套HTML页面，而HTML中最重要的就是JS事件了，那么Webview与JS事件的交互就是开发中经常需要面对的问题，这里介绍一种比较通用的方式，通过 <code>WebChromeClient</code> 的<code>onJsAlert()</code>、<code>onJsConfirm()</code>、<code>onJsPrompt（）</code>方法回调拦截JS对话框<code>alert()</code>、<code>confirm()</code>、<code>prompt（）</code> 消息。</p>
<p><em>javascript.html</em>：以.html格式放到src/main/assets文件夹里</p>
<pre class=" language-html"><code class="language-html"><span class="token doctype">&lt;!DOCTYPE html></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span><span class="token punctuation">></span></span>
   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">></span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>utf-8<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">></span></span>Carson_Ho<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">></span></span>

     <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">></span></span><span class="token script language-javascript">

    <span class="token keyword">function</span> <span class="token function">clickprompt</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token comment" spellcheck="true">// 调用prompt（）</span>
    <span class="token keyword">var</span> result<span class="token operator">=</span><span class="token function">prompt</span><span class="token punctuation">(</span><span class="token string">"js://demo?arg1=111&amp;arg2=222"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">"demo "</span> <span class="token operator">+</span> result<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">></span></span>

<span class="token comment" spellcheck="true">&lt;!-- 点击按钮则调用clickprompt()  --></span>
   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">></span></span>
     <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>button<span class="token punctuation">"</span></span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>button1<span class="token punctuation">"</span></span> <span class="token attr-name">onclick</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>clickprompt()<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>点击调用Android代码<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">></span></span>
   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">></span></span></code></pre>
<p>当使用<code>mWebView.loadUrl(&quot;file:///android_asset/javascript.html&quot;)</code>加载了上述JS代码后，就会触发回调<code>onJsPrompt（）</code>，具体如下：</p>
<ol>
<li>如果是拦截警告框（即<code>alert()</code>），则触发回调<code>onJsAlert（）</code>；</li>
<li>如果是拦截确认框（即<code>confirm()</code>），则触发回调<code>onJsConfirm（）</code>；</li>
</ol>
<p><em>Webview</em>：在Android通过WebChromeClient复写onJsPrompt（）</p>
<pre class=" language-java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MainActivity</span> <span class="token keyword">extends</span> <span class="token class-name">AppCompatActivity</span> <span class="token punctuation">{</span>

    WebView mWebView<span class="token punctuation">;</span>
<span class="token comment" spellcheck="true">//    Button button;</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">onCreate</span><span class="token punctuation">(</span>Bundle savedInstanceState<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">onCreate</span><span class="token punctuation">(</span>savedInstanceState<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">setContentView</span><span class="token punctuation">(</span>R<span class="token punctuation">.</span>layout<span class="token punctuation">.</span>activity_main<span class="token punctuation">)</span><span class="token punctuation">;</span>

        mWebView <span class="token operator">=</span> <span class="token punctuation">(</span>WebView<span class="token punctuation">)</span> <span class="token function">findViewById</span><span class="token punctuation">(</span>R<span class="token punctuation">.</span>id<span class="token punctuation">.</span>webview<span class="token punctuation">)</span><span class="token punctuation">;</span>

        WebSettings webSettings <span class="token operator">=</span> mWebView<span class="token punctuation">.</span><span class="token function">getSettings</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment" spellcheck="true">// 设置与Js交互的权限</span>
        webSettings<span class="token punctuation">.</span><span class="token function">setJavaScriptEnabled</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment" spellcheck="true">// 设置允许JS弹窗</span>
        webSettings<span class="token punctuation">.</span><span class="token function">setJavaScriptCanOpenWindowsAutomatically</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment" spellcheck="true">// 先加载JS代码</span>
        <span class="token comment" spellcheck="true">// 格式规定为:file:///android_asset/文件名.html</span>
        mWebView<span class="token punctuation">.</span><span class="token function">loadUrl</span><span class="token punctuation">(</span><span class="token string">"file:///android_asset/javascript.html"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>


        mWebView<span class="token punctuation">.</span><span class="token function">setWebChromeClient</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">WebChromeClient</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                                        <span class="token comment" spellcheck="true">// 拦截输入框(原理同方式2)</span>
                                        <span class="token comment" spellcheck="true">// 参数message:代表promt（）的内容（不是url）</span>
                                        <span class="token comment" spellcheck="true">// 参数result:代表输入框的返回值</span>
                                        <span class="token annotation punctuation">@Override</span>
                                        <span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">onJsPrompt</span><span class="token punctuation">(</span>WebView view<span class="token punctuation">,</span> String url<span class="token punctuation">,</span> String message<span class="token punctuation">,</span> String defaultValue<span class="token punctuation">,</span> JsPromptResult result<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                                            <span class="token comment" spellcheck="true">// 根据协议的参数，判断是否是所需要的url(原理同方式2)</span>
                                            <span class="token comment" spellcheck="true">// 一般根据scheme（协议格式） &amp; authority（协议名）判断（前两个参数）</span>
                                            <span class="token comment" spellcheck="true">//假定传入进来的 url = "js://webview?arg1=111&amp;arg2=222"（同时也是约定好的需要拦截的）</span>

                                            Uri uri <span class="token operator">=</span> Uri<span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span>message<span class="token punctuation">)</span><span class="token punctuation">;</span>
                                            <span class="token comment" spellcheck="true">// 如果url的协议 = 预先约定的 js 协议</span>
                                            <span class="token comment" spellcheck="true">// 就解析往下解析参数</span>
                                            <span class="token keyword">if</span> <span class="token punctuation">(</span> uri<span class="token punctuation">.</span><span class="token function">getScheme</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span><span class="token string">"js"</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

                                                <span class="token comment" spellcheck="true">// 如果 authority  = 预先约定协议里的 webview，即代表都符合约定的协议</span>
                                                <span class="token comment" spellcheck="true">// 所以拦截url,下面JS开始调用Android需要的方法</span>
                                                <span class="token keyword">if</span> <span class="token punctuation">(</span>uri<span class="token punctuation">.</span><span class="token function">getAuthority</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span><span class="token string">"webview"</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

                                                    <span class="token comment" spellcheck="true">//</span>
                                                    <span class="token comment" spellcheck="true">// 执行JS所需要调用的逻辑</span>
                                                    System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"js调用了Android的方法"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                                                    <span class="token comment" spellcheck="true">// 可以在协议上带有参数并传递到Android上</span>
                                                    HashMap<span class="token operator">&lt;</span>String<span class="token punctuation">,</span> String<span class="token operator">></span> params <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashMap</span><span class="token operator">&lt;</span><span class="token operator">></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                                                    Set<span class="token operator">&lt;</span>String<span class="token operator">></span> collection <span class="token operator">=</span> uri<span class="token punctuation">.</span><span class="token function">getQueryParameterNames</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

                                                    <span class="token comment" spellcheck="true">//参数result:代表消息框的返回值(输入值)</span>
                                                    result<span class="token punctuation">.</span><span class="token function">confirm</span><span class="token punctuation">(</span><span class="token string">"js调用了Android的方法成功啦"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                                                <span class="token punctuation">}</span>
                                                <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
                                            <span class="token punctuation">}</span>
                                            <span class="token keyword">return</span> <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">onJsPrompt</span><span class="token punctuation">(</span>view<span class="token punctuation">,</span> url<span class="token punctuation">,</span> message<span class="token punctuation">,</span> defaultValue<span class="token punctuation">,</span> result<span class="token punctuation">)</span><span class="token punctuation">;</span>
                                        <span class="token punctuation">}</span>

<span class="token comment" spellcheck="true">// 通过alert()和confirm()拦截的原理相同，此处不作过多讲述</span>

                                        <span class="token comment" spellcheck="true">// 拦截JS的警告框</span>
                                        <span class="token annotation punctuation">@Override</span>
                                        <span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">onJsAlert</span><span class="token punctuation">(</span>WebView view<span class="token punctuation">,</span> String url<span class="token punctuation">,</span> String message<span class="token punctuation">,</span> JsResult result<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                                            <span class="token keyword">return</span> <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">onJsAlert</span><span class="token punctuation">(</span>view<span class="token punctuation">,</span> url<span class="token punctuation">,</span> message<span class="token punctuation">,</span> result<span class="token punctuation">)</span><span class="token punctuation">;</span>
                                        <span class="token punctuation">}</span>

                                        <span class="token comment" spellcheck="true">// 拦截JS的确认框</span>
                                        <span class="token annotation punctuation">@Override</span>
                                        <span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">onJsConfirm</span><span class="token punctuation">(</span>WebView view<span class="token punctuation">,</span> String url<span class="token punctuation">,</span> String message<span class="token punctuation">,</span> JsResult result<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                                            <span class="token keyword">return</span> <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">onJsConfirm</span><span class="token punctuation">(</span>view<span class="token punctuation">,</span> url<span class="token punctuation">,</span> message<span class="token punctuation">,</span> result<span class="token punctuation">)</span><span class="token punctuation">;</span>
                                        <span class="token punctuation">}</span>
                                    <span class="token punctuation">}</span>
        <span class="token punctuation">)</span><span class="token punctuation">;</span>


            <span class="token punctuation">}</span>

        <span class="token punctuation">}</span></code></pre>
<p>最终结果展示</p>
<p><img src="/2020/05/23/da-qian-duan-kua-ping-tai-ji-zhu/3.jpg" alt></p>
<p>通过刚刚的代码，对Webview的作用应该理解了，借此对刚刚说的几种App类型用大白话做一个总结吧。</p>
<table>
<thead>
<tr>
<th>App</th>
<th>解释</th>
</tr>
</thead>
<tbody><tr>
<td>Native App</td>
<td>原生应用。类比于windows系统上的桌面应用，可以轻松的调用系统提供的API<br>但移植性差，例如windows上的桌面应用不能直接在Linux上使用</td>
</tr>
<tr>
<td>Web App</td>
<td>Web 应用。严格来说，我觉得它不能称之为App，它的实现类比于windows上的网页<br>其实就可以理解为它是移动端的网页应用。而我理解的App是安装在操作系统上的App</td>
</tr>
<tr>
<td>Hybrid App</td>
<td>混合应用。它实际上可以说是原生组件提供的功能，在系统原生组件中提供了WebView组件<br>这个组件特殊的地方在于，可以在这个组件中展示HTML页面。因此很多人说<br>现在的App开发就是用H5开发，然后套了个外壳，这个壳指的就是WebView</td>
</tr>
<tr>
<td>React Native App</td>
<td>原生应用。虽然开发的时候是用JS开发，但是编译后是原生组件。可以这么理解<br>React Native框架提供了React组件到原生组件的映射，每个JS事件可以对应到原生组件的事件<br>最终编译后把React组件和对应的JS事件代码翻译成原生组件和事件代码</td>
</tr>
</tbody></table>
<p>以上是个人理解。可能会有类比不恰当的地方，但大概就是这么个意思吧</p>
<h2 id="APP对比"><a href="#APP对比" class="headerlink" title="APP对比"></a>APP对比</h2><table>
<thead>
<tr>
<th></th>
<th>Native App</th>
<th>Hybrid App</th>
<th>Web App</th>
<th>React Native App</th>
</tr>
</thead>
<tbody><tr>
<td><strong>App特性比较</strong></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>图像渲染</td>
<td>本地API渲染</td>
<td>混合</td>
<td>H5</td>
<td>本地API渲染</td>
</tr>
<tr>
<td>性能</td>
<td>最快</td>
<td>慢</td>
<td>快</td>
<td>快</td>
</tr>
<tr>
<td>界面</td>
<td>原生</td>
<td>模仿</td>
<td>模仿</td>
<td></td>
</tr>
<tr>
<td>发布</td>
<td>App Store</td>
<td>App Store</td>
<td>Web</td>
<td>App Store</td>
</tr>
<tr>
<td><strong>本机设备访问</strong></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>照相机</td>
<td>支持</td>
<td>支持</td>
<td>不支持</td>
<td>支持</td>
</tr>
<tr>
<td>系统通知</td>
<td>支持</td>
<td>支持</td>
<td>不支持</td>
<td>支持</td>
</tr>
<tr>
<td>定位</td>
<td>支持</td>
<td>支持</td>
<td>支持</td>
<td>支持</td>
</tr>
<tr>
<td>蓝牙</td>
<td>支持</td>
<td>支持</td>
<td>不支持</td>
<td>支持</td>
</tr>
<tr>
<td><strong>其他比较</strong></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>开发成本</td>
<td>高</td>
<td>中</td>
<td>低</td>
<td>中</td>
</tr>
<tr>
<td>维护更新</td>
<td>复杂</td>
<td>简单</td>
<td>简单</td>
<td>简单</td>
</tr>
<tr>
<td>体验</td>
<td>优</td>
<td>优</td>
<td>差</td>
<td>优</td>
</tr>
<tr>
<td>Store或Market</td>
<td>认可</td>
<td>认可</td>
<td>不认可</td>
<td>认可</td>
</tr>
<tr>
<td>安装</td>
<td>需要</td>
<td>需要</td>
<td>不需要</td>
<td>需要</td>
</tr>
<tr>
<td>跨平台</td>
<td>差</td>
<td>优</td>
<td>优</td>
<td>优</td>
</tr>
<tr>
<td>网络要求</td>
<td>支持离线</td>
<td>依赖网络</td>
<td>依赖网络</td>
<td>支持离线</td>
</tr>
<tr>
<td>资源存储</td>
<td>本地</td>
<td>本地和服务器</td>
<td>服务器</td>
<td>本地</td>
</tr>
<tr>
<td>适用场景</td>
<td>1.偏操作互动多的工具类应用<br>2.需要访问特定的原生API<br>3.对速度要求较高</td>
<td>1.同Native App中提到的适用场景<br>2.需要频繁小幅度更新</td>
<td>1.作为对非核心业务在移动端的入口补足<br>2.作为用户轻量、低频使用的体验增强<br>3.作为吸引用户安装Native App的引导页</td>
<td>1.适用于快速迭代不同平台的App应用<br>2.绝大部分功能在不同系统上可以使用一套代码解决，成本低</td>
</tr>
</tbody></table>
<h2 id="其他类似React-Native-App框架"><a href="#其他类似React-Native-App框架" class="headerlink" title="其他类似React Native App框架"></a>其他类似React Native App框架</h2><p>React Native App的实现原理最主要的就是在编译时，把JS组件转换为原生组件。市面上还有一些实现了这种转换功能的跨平台框架。</p>
<h3 id="Weex"><a href="#Weex" class="headerlink" title="Weex"></a>Weex</h3><p>Weex 是阿里开源的一款跨平台移动开发工具，是阿里巴巴开发团队在RN的成功案例上，重新设计出的一套开发模式，站在了巨人肩膀上并有淘宝团队项目做养料，广受关注，2016年4月正式开源，并在v2.0版本官方支持Vue.js，与RN分庭抗礼。Weex 这个名字是取得 weeks 的谐音。Weex能够完美兼顾性能与动态性，让移动开发者通过简捷的前端语法写出Native级别的性能体验，并支持iOS、安卓、YunOS及Web等多端部署。<strong>Weex</strong> 是一个使用 Web 开发体验来开发高性能原生应用的框架。使用同一套代码就可以构建 Android、iOS 和 Web 应用。Weex 的结构是解耦的，渲染引擎与语法层是分开的，目前主要支持 Vue.js 和 Rax 这两个前端框架。Weex 在 iOS 和 Android 上都实现了一个渲染引擎，并提供了一套基础的内置组件。基于这些组件，你可以用JS封装更多的上层组件。</p>
<p><em>Weex于2016年6月开始发布版本，第一个版本号为v0.5.0。</em></p>
<h3 id="Flutter"><a href="#Flutter" class="headerlink" title="Flutter"></a>Flutter</h3><p>Flutter是谷歌推出的跨平台项目，它的前身是Sky项目，起源于2015年。Sky项目一开始就定位Dart作为开发语言，使用Dart语言开发移动端项目，Sky它不依赖于平台，它的代码可以运行在Android、iOS设备上，真正做到了“一次代码，处处运行”，让你在Android、iOS设备上拥有接近原生的体验。主要特点是跨平台、高保真、有些性能。Flutter提供了丰富的组件、接口，开发者可以很快地为 Flutter添加 Native扩展。同时Flutter还可以使用 Native引擎渲染视图，这无疑能为用户提供良好的体验。</p>
<p><em>Flutter在2017年5月发布了第一个版本v0.0.6。</em></p>
<h2 id="其他跨平台框架"><a href="#其他跨平台框架" class="headerlink" title="其他跨平台框架"></a>其他跨平台框架</h2><p>市面有很多实现了跨平台的框架，其实现原理基本属于上面四大类App中的一种，下面分别介绍一下它们</p>
<h3 id="Taro"><a href="#Taro" class="headerlink" title="Taro"></a>Taro</h3><p>小程序跨平台开发，一款可以用TSX、JSX和React语法开发小程序的框架，内置了一些UI组件，还有物料市场，目前看势头很好。还可以集成React-native,真正做到一套代码多处运行，不仅能编译成各种平台小程序，还可以是RN的应用，还支持<strong>快应用</strong>。官网地址<a href="https://taro.aotu.io/" target="_blank" rel="noopener">点这里</a>。现如今市面上端的形态多种多样，Web、React-Native、微信小程序等各种端大行其道，当业务要求同时在不同的端都要求有所表现的时候，针对不同的端去编写多套代码的成本显然非常高，这时候只编写一套代码就能够适配到多端的能力就显得极为需要。</p>
<p><img src="/2020/05/23/da-qian-duan-kua-ping-tai-ji-zhu/4.png" alt></p>
<p>使用 Taro，我们可以只书写一套代码，再通过 Taro 的编译工具，将源代码分别编译出可以在不同端（微信/百度/支付宝/字节跳动/QQ/京东小程序、快应用、H5、React-Native 等）运行的代码。</p>
<p>Taro的源码我没看过，但是我看里面用了很多他们自己写的babel包，应该是JIT模式，加入了中间层，把你写的东西，编译成了小程序可以执行的代码，个人认为小程序不要做得太复杂，不然你还不如做个APP，轻量跨平台，自然是最快速的，而且可以使用TSX语法，React，太好了。</p>
<h3 id="快应用"><a href="#快应用" class="headerlink" title="快应用"></a>快应用</h3><p>华为、小米等九大手机厂商为了跟小程序竞争搞出来的，基于硬件平台共同推出的新型应用生态。像RN这些框架，会内置一些渲染/排版引擎，那么打包出来提交比较大，快应用是集成到安卓手机的ROM中，所以只有源码那部分，安装体积比较小，这样就叫快应用。快应用使用原生js开发，框架跟原生微信小程序很像（写着不舒服，<strong>Taro</strong>支持快应用），官网地址<a href="https://www.quickapp.cn/" target="_blank" rel="noopener">点这里</a></p>
<p><img src="/2020/05/23/da-qian-duan-kua-ping-tai-ji-zhu/5.png" alt></p>
<h3 id="Electron"><a href="#Electron" class="headerlink" title="Electron"></a>Electron</h3><p>Electron就是把Node.js的运行环境和谷歌浏览器内核一起打包了，于是就拥有了Node.js和H5技术的融合能力，又因为是基于C++编写，于是可以跨平台。Mac、windows、Linux。所以Electron是一个用 <code>HTML</code>，<code>CSS</code> 和 <code>JavaScript</code> 来构建跨平台桌面应用程序的一个开源库，没错，你可以用写网页的知识来写一个桌面应用程序！Electron开发出来的东西是软件，是一个安装在电脑上的软件！是不是发现了新大陆，前端开发不仅仅只能写web页面了，可以做的事情很多了。官网地址<a href="http://www.electronjs.org/" target="_blank" rel="noopener">点这里</a></p>
<p><img src="/2020/05/23/da-qian-duan-kua-ping-tai-ji-zhu/6.png" alt></p>

            </div>
            <hr/>

            

    <div class="reprint" id="reprint-statement">
        
            <div class="reprint__author">
                <span class="reprint-meta" style="font-weight: bold;">
                    <i class="fas fa-user">
                        Author:
                    </i>
                </span>
                <span class="reprint-info">
                    <a href="https://lushunjian.gitee.io" rel="external nofollow noreferrer">顺坚</a>
                </span>
            </div>
            <div class="reprint__type">
                <span class="reprint-meta" style="font-weight: bold;">
                    <i class="fas fa-link">
                        Link:
                    </i>
                </span>
                <span class="reprint-info">
                    <a href="https://lushunjian.gitee.io/2020/05/23/da-qian-duan-kua-ping-tai-ji-zhu/">https://lushunjian.gitee.io/2020/05/23/da-qian-duan-kua-ping-tai-ji-zhu/</a>
                </span>
            </div>
            <div class="reprint__notice">
                <span class="reprint-meta" style="font-weight: bold;">
                    <i class="fas fa-copyright">
                        Reprint policy:
                    </i>
                </span>
                <span class="reprint-info">
                    All articles in this blog are used except for special statements
                    <a href="https://creativecommons.org/licenses/by/4.0/deed.zh" rel="external nofollow noreferrer" target="_blank">CC BY 4.0</a>
                    reprint polocy. If reproduced, please indicate source
                    <a href="https://lushunjian.gitee.io" target="_blank">顺坚</a>
                    !
                </span>
            </div>
        
    </div>

    <script async defer>
      document.addEventListener("copy", function (e) {
        let toastHTML = '<span>Copied successfully, please follow the reprint policy of this article</span><button class="btn-flat toast-action" onclick="navToReprintStatement()" style="font-size: smaller">more</a>';
        M.toast({html: toastHTML})
      });

      function navToReprintStatement() {
        $("html, body").animate({scrollTop: $("#reprint-statement").offset().top - 80}, 800);
      }
    </script>



            <div class="tag_share" style="display: block;">
                <div class="post-meta__tag-list" style="display: inline-block;">
                    
                        <div class="article-tag">
                            
                                <a href="/tags/%E5%89%8D%E7%AB%AF/">
                                    <span class="chip bg-color">前端</span>
                                </a>
                            
                        </div>
                    
                </div>
                <div class="post_share" style="zoom: 80%; width: fit-content; display: inline-block; float: right; margin: -0.15rem 0;">
                    <link rel="stylesheet" type="text/css" href="/libs/share/css/share.min.css">

<div id="article-share">
    
    
    <div class="social-share" data-sites="twitter,facebook,google,qq,qzone,wechat,weibo,douban,linkedin" data-wechat-qrcode-helper="<p>微信扫一扫即可分享！</p>"></div>
    <script src="/libs/share/js/social-share.min.js"></script>
    

    

</div>

                </div>
            </div>
            
                <style>
    #reward {
        margin: 40px 0;
        text-align: center;
    }

    #reward .reward-link {
        font-size: 1.4rem;
        line-height: 38px;
    }

    #reward .btn-floating:hover {
        box-shadow: 0 6px 12px rgba(0, 0, 0, 0.2), 0 5px 15px rgba(0, 0, 0, 0.2);
    }

    #rewardModal {
        width: 320px;
        height: 350px;
    }

    #rewardModal .reward-title {
        margin: 15px auto;
        padding-bottom: 5px;
    }

    #rewardModal .modal-content {
        padding: 10px;
    }

    #rewardModal .close {
        position: absolute;
        right: 15px;
        top: 15px;
        color: rgba(0, 0, 0, 0.5);
        font-size: 1.3rem;
        line-height: 20px;
        cursor: pointer;
    }

    #rewardModal .close:hover {
        color: #ef5350;
        transform: scale(1.3);
        -moz-transform:scale(1.3);
        -webkit-transform:scale(1.3);
        -o-transform:scale(1.3);
    }

    #rewardModal .reward-tabs {
        margin: 0 auto;
        width: 210px;
    }

    .reward-tabs .tabs {
        height: 38px;
        margin: 10px auto;
        padding-left: 0;
    }

    .reward-content ul {
        padding-left: 0 !important;
    }

    .reward-tabs .tabs .tab {
        height: 38px;
        line-height: 38px;
    }

    .reward-tabs .tab a {
        color: #fff;
        background-color: #ccc;
    }

    .reward-tabs .tab a:hover {
        background-color: #ccc;
        color: #fff;
    }

    .reward-tabs .wechat-tab .active {
        color: #fff !important;
        background-color: #22AB38 !important;
    }

    .reward-tabs .alipay-tab .active {
        color: #fff !important;
        background-color: #019FE8 !important;
    }

    .reward-tabs .reward-img {
        width: 210px;
        height: 210px;
    }
</style>

<div id="reward">
    <a href="#rewardModal" class="reward-link modal-trigger btn-floating btn-medium waves-effect waves-light red">赏</a>

    <!-- Modal Structure -->
    <div id="rewardModal" class="modal">
        <div class="modal-content">
            <a class="close modal-close"><i class="fas fa-times"></i></a>
            <h4 class="reward-title">你的赏识是我前进的动力</h4>
            <div class="reward-content">
                <div class="reward-tabs">
                    <ul class="tabs row">
                        <li class="tab col s6 alipay-tab waves-effect waves-light"><a href="#alipay">支付宝</a></li>
                        <li class="tab col s6 wechat-tab waves-effect waves-light"><a href="#wechat">微 信</a></li>
                    </ul>
                    <div id="alipay">
                        <img src="/medias/reward/alipay.png" class="reward-img" alt="支付宝打赏二维码">
                    </div>
                    <div id="wechat">
                        <img src="/medias/reward/wechat.png" class="reward-img" alt="微信打赏二维码">
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
    $(function () {
        $('.tabs').tabs();
		
			//  豆瓣插件a标签移除target属性
		$("#hexo-douban-tab1").click(function (event) {
                    event.preventDefault();   // 如果<a>定义了 target="_blank“ 需要这句来阻止打开新页面
                });
		$("#hexo-douban-tab2").click(function (event) {
                    event.preventDefault();   // 如果<a>定义了 target="_blank“ 需要这句来阻止打开新页面
                });
		$("#hexo-douban-tab3").click(function (event) {
                    event.preventDefault();   // 如果<a>定义了 target="_blank“ 需要这句来阻止打开新页面
                });
		$(".hexo-douban-firstpage").click(function (event) {
                    event.preventDefault();   // 如果<a>定义了 target="_blank“ 需要这句来阻止打开新页面
                });
		$(".hexo-douban-previouspage").click(function (event) {
                    event.preventDefault();   // 如果<a>定义了 target="_blank“ 需要这句来阻止打开新页面
                });
		$(".hexo-douban-nextpage").click(function (event) {
                    event.preventDefault();   // 如果<a>定义了 target="_blank“ 需要这句来阻止打开新页面
                });
		$(".hexo-douban-lastpage").click(function (event) {
                    event.preventDefault();   // 如果<a>定义了 target="_blank“ 需要这句来阻止打开新页面
                });
    });
	

</script>
            
        </div>
    </div>

    

    

    

    

    
        <style>
    .valine-card {
        margin: 1.5rem auto;
    }

    .valine-card .card-content {
        padding: 20px 20px 5px 20px;
    }

    #vcomments textarea {
        box-sizing: border-box;
        background: url("") 100% 100% no-repeat;
    }

    #vcomments p {
        margin: 2px 2px 10px;
        font-size: 1.05rem;
        line-height: 1.78rem;
    }

    #vcomments blockquote p {
        text-indent: 0.2rem;
    }

    #vcomments a {
        padding: 0 2px;
        color: #4cbf30;
        font-weight: 500;
        text-decoration: none;
    }

    #vcomments img {
        max-width: 100%;
        height: auto;
        cursor: pointer;
    }

    #vcomments ol li {
        list-style-type: decimal;
    }

    #vcomments ol,
    ul {
        display: block;
        padding-left: 2em;
        word-spacing: 0.05rem;
    }

    #vcomments ul li,
    ol li {
        display: list-item;
        line-height: 1.8rem;
        font-size: 1rem;
    }

    #vcomments ul li {
        list-style-type: disc;
    }

    #vcomments ul ul li {
        list-style-type: circle;
    }

    #vcomments table, th, td {
        padding: 12px 13px;
        border: 1px solid #dfe2e5;
    }

    #vcomments table, th, td {
        border: 0;
    }

    table tr:nth-child(2n), thead {
        background-color: #fafafa;
    }

    #vcomments table th {
        background-color: #f2f2f2;
        min-width: 80px;
    }

    #vcomments table td {
        min-width: 80px;
    }

    #vcomments h1 {
        font-size: 1.85rem;
        font-weight: bold;
        line-height: 2.2rem;
    }

    #vcomments h2 {
        font-size: 1.65rem;
        font-weight: bold;
        line-height: 1.9rem;
    }

    #vcomments h3 {
        font-size: 1.45rem;
        font-weight: bold;
        line-height: 1.7rem;
    }

    #vcomments h4 {
        font-size: 1.25rem;
        font-weight: bold;
        line-height: 1.5rem;
    }

    #vcomments h5 {
        font-size: 1.1rem;
        font-weight: bold;
        line-height: 1.4rem;
    }

    #vcomments h6 {
        font-size: 1rem;
        line-height: 1.3rem;
    }

    #vcomments p {
        font-size: 1rem;
        line-height: 1.5rem;
    }

    #vcomments hr {
        margin: 12px 0;
        border: 0;
        border-top: 1px solid #ccc;
    }

    #vcomments blockquote {
        margin: 15px 0;
        border-left: 5px solid #42b983;
        padding: 1rem 0.8rem 0.3rem 0.8rem;
        color: #666;
        background-color: rgba(66, 185, 131, .1);
    }

    #vcomments pre {
        font-family: monospace, monospace;
        padding: 1.2em;
        margin: .5em 0;
        background: #272822;
        overflow: auto;
        border-radius: 0.3em;
        tab-size: 4;
    }

    #vcomments code {
        font-family: monospace, monospace;
        padding: 1px 3px;
        font-size: 0.92rem;
        color: #e96900;
        background-color: #f8f8f8;
        border-radius: 2px;
    }

    #vcomments pre code {
        font-family: monospace, monospace;
        padding: 0;
        color: #e8eaf6;
        background-color: #272822;
    }

    #vcomments pre[class*="language-"] {
        padding: 1.2em;
        margin: .5em 0;
    }

    #vcomments code[class*="language-"],
    pre[class*="language-"] {
        color: #e8eaf6;
    }

    #vcomments [type="checkbox"]:not(:checked), [type="checkbox"]:checked {
        position: inherit;
        margin-left: -1.3rem;
        margin-right: 0.4rem;
        margin-top: -1px;
        vertical-align: middle;
        left: unset;
        visibility: visible;
    }

    #vcomments b,
    strong {
        font-weight: bold;
    }

    #vcomments dfn {
        font-style: italic;
    }

    #vcomments small {
        font-size: 85%;
    }

    #vcomments cite {
        font-style: normal;
    }

    #vcomments mark {
        background-color: #fcf8e3;
        padding: .2em;
    }

    #vcomments table, th, td {
        padding: 12px 13px;
        border: 1px solid #dfe2e5;
    }

    table tr:nth-child(2n), thead {
        background-color: #fafafa;
    }

    #vcomments table th {
        background-color: #f2f2f2;
        min-width: 80px;
    }

    #vcomments table td {
        min-width: 80px;
    }

    #vcomments [type="checkbox"]:not(:checked), [type="checkbox"]:checked {
        position: inherit;
        margin-left: -1.3rem;
        margin-right: 0.4rem;
        margin-top: -1px;
        vertical-align: middle;
        left: unset;
        visibility: visible;
    }
</style>

<div class="card valine-card" data-aos="fade-up">
    <div class="comment_headling" style="font-size: 20px; font-weight: 700; position: relative; left: 20px; top: 15px; padding-bottom: 5px;">
        <i class="fas fa-comments fa-fw" aria-hidden="true"></i>
        <span>评论</span>
    </div>
    <div id="vcomments" class="card-content" style="display: grid">
    </div>
</div>

<script src="/libs/valine/av-min.js"></script>
<script src="/libs/valine/Valine.min.js"></script>
<script>
    new Valine({
        el: '#vcomments',
        appId: 'YG6BDT8GDLJm8rY8uQqxOI3z-gzGzoHsz',
        appKey: '11lNW097980KXhPyhnB1LLj3',
        notify: 'true' === 'true',
        verify: 'false' === 'true',
        visitor: 'true' === 'true',
        avatar: 'mm',
        pageSize: '6',
        lang: 'en',
        placeholder: '如果你没有github账号，可以在这里评论哦'
    });
</script>

    

    

<article id="prenext-posts" class="prev-next articles">
    <div class="row article-row">
        
        <div class="article col s12 m6" data-aos="fade-up">
            <div class="article-badge left-badge text-color">
                <i class="fas fa-chevron-left"></i>&nbsp;Previous</div>
            <div class="card">
                <a href="/2020/05/26/js-zhong-de-this-zhi-xiang/">
                    <div class="card-image">
                        
                        
                        <img src="/medias/featureimages/33.jpg" class="responsive-img" alt="JS中的this指向">
                        
                        <span class="card-title">JS中的this指向</span>
                    </div>
                </a>
                <div class="card-content article-content">
                    <div class="summary block-with-text">
                        
                            this 是JS 中很重要的一个指针，但是往往也是最容易产生bug 的地方，因为稍不留神this的指向就和你以为的指向根本不是一个对象，让多数新手懵逼，部分老手觉得恶心，这是因为this的绑定 [难以捉摸]，出错的时候还往往不知道为什么，相
                        
                    </div>
                    <div class="publish-info">
                        <span class="publish-date">
                            <i class="far fa-clock fa-fw icon-date"></i>2020-05-26
                        </span>
                        <span class="publish-author">
                            
                            <i class="fas fa-bookmark fa-fw icon-category"></i>
                            
                            <a href="/categories/%E5%89%8D%E7%AB%AF/" class="post-category">
                                    前端
                                </a>
                            
                            
                        </span>
                    </div>
                </div>
                
                <div class="card-action article-tags">
                    
                    <a href="/tags/javascript/">
                        <span class="chip bg-color">javascript</span>
                    </a>
                    
                </div>
                
            </div>
        </div>
        
        
        <div class="article col s12 m6" data-aos="fade-up">
            <div class="article-badge right-badge text-color">
                Next&nbsp;<i class="fas fa-chevron-right"></i>
            </div>
            <div class="card">
                <a href="/2020/05/17/react-shi-yong-zong-jie/">
                    <div class="card-image">
                        
                        
                        <img src="/medias/featureimages/0.jpg" class="responsive-img" alt="React使用总结">
                        
                        <span class="card-title">React使用总结</span>
                    </div>
                </a>
                <div class="card-content article-content">
                    <div class="summary block-with-text">
                        
                            使用了一段时间React，从最开始的排斥到习惯，然后再到逐渐喜欢上它，在此做一个总结。我在之前使用过一段时间的Vue，并通过Vue把公司的风控项目重构成了一个前后端分离项目。由于参与另一个项目便开始使用React。说实话，在使用Vue后再使
                        
                    </div>
                    <div class="publish-info">
                            <span class="publish-date">
                                <i class="far fa-clock fa-fw icon-date"></i>2020-05-17
                            </span>
                        <span class="publish-author">
                            
                            <i class="fas fa-bookmark fa-fw icon-category"></i>
                            
                            <a href="/categories/%E5%89%8D%E7%AB%AF/" class="post-category">
                                    前端
                                </a>
                            
                            
                        </span>
                    </div>
                </div>
                
                <div class="card-action article-tags">
                    
                    <a href="/tags/react/">
                        <span class="chip bg-color">react</span>
                    </a>
                    
                </div>
                
            </div>
        </div>
        
    </div>
</article>

</div>



<!-- 代码块功能依赖 -->
<script type="text/javascript" src="/libs/codeBlock/codeBlockFuction.js"></script>

<!-- 代码语言 -->

<script type="text/javascript" src="/libs/codeBlock/codeLang.js"></script>


<!-- 代码块复制 -->

<script type="text/javascript" src="/libs/codeBlock/codeCopy.js"></script>


<!-- 代码块收缩 -->

<script type="text/javascript" src="/libs/codeBlock/codeShrink.js"></script>


<!-- 代码块折行 -->

<style type="text/css">
code[class*="language-"], pre[class*="language-"] { white-space: pre !important; }
</style>


    </div>
    <div id="toc-aside" class="expanded col l3 hide-on-med-and-down">
        <div class="toc-widget">
            <div class="toc-title"><i class="far fa-list-alt"></i>&nbsp;&nbsp;TOC</div>
            <div id="toc-content"></div>
        </div>
    </div>
</div>

<!-- TOC 悬浮按钮. -->

<div id="floating-toc-btn" class="hide-on-med-and-down">
    <a class="btn-floating btn-large bg-color">
        <i class="fas fa-list-ul"></i>
    </a>
</div>


<script src="/libs/tocbot/tocbot.min.js"></script>
<script>
    $(function () {
        tocbot.init({
            tocSelector: '#toc-content',
            contentSelector: '#articleContent',
            headingsOffset: -($(window).height() * 0.4 - 45),
            collapseDepth: Number('0'),
            headingSelector: 'h2, h3, h4'
        });

        // modify the toc link href to support Chinese.
        let i = 0;
        let tocHeading = 'toc-heading-';
        $('#toc-content a').each(function () {
            $(this).attr('href', '#' + tocHeading + (++i));
        });

        // modify the heading title id to support Chinese.
        i = 0;
        $('#articleContent').children('h2, h3, h4').each(function () {
            $(this).attr('id', tocHeading + (++i));
        });

        // Set scroll toc fixed.
        let tocHeight = parseInt($(window).height() * 0.4 - 64);
        let $tocWidget = $('.toc-widget');
        $(window).scroll(function () {
            let scroll = $(window).scrollTop();
            /* add post toc fixed. */
            if (scroll > tocHeight) {
                $tocWidget.addClass('toc-fixed');
            } else {
                $tocWidget.removeClass('toc-fixed');
            }
        });

        
        /* 修复文章卡片 div 的宽度. */
        let fixPostCardWidth = function (srcId, targetId) {
            let srcDiv = $('#' + srcId);
            if (srcDiv.length === 0) {
                return;
            }

            let w = srcDiv.width();
            if (w >= 450) {
                w = w + 21;
            } else if (w >= 350 && w < 450) {
                w = w + 18;
            } else if (w >= 300 && w < 350) {
                w = w + 16;
            } else {
                w = w + 14;
            }
            $('#' + targetId).width(w);
        };

        // 切换TOC目录展开收缩的相关操作.
        const expandedClass = 'expanded';
        let $tocAside = $('#toc-aside');
        let $mainContent = $('#main-content');
        $('#floating-toc-btn .btn-floating').click(function () {
            if ($tocAside.hasClass(expandedClass)) {
                $tocAside.removeClass(expandedClass).hide();
                $mainContent.removeClass('l9');
            } else {
                $tocAside.addClass(expandedClass).show();
                $mainContent.addClass('l9');
            }
            fixPostCardWidth('artDetail', 'prenext-posts');
        });
        
    });
</script>

    

</main>



    <footer class="page-footer bg-color">
    
    <div class="container row center-align" style="margin-bottom: 0px !important;">
        <div class="col s12 m8 l8 copy-right">
            Copyright&nbsp;&copy;
            <span id="year">2019</span>
            <a href="https://lushunjian.gitee.io" target="_blank">顺坚</a>
            |&nbsp;Powered by&nbsp;<a href="https://hexo.io/" target="_blank">Hexo</a>
            |&nbsp;Theme&nbsp;<a href="https://github.com/blinkfox/hexo-theme-matery" target="_blank">Matery</a>
            <br>
            
            
            
            
            
            
            <span id="busuanzi_container_site_pv">
                |&nbsp;<i class="far fa-eye"></i>&nbsp;总访问量:&nbsp;<span id="busuanzi_value_site_pv"
                    class="white-color"></span>&nbsp;次
            </span>
            
            
            <span id="busuanzi_container_site_uv">
                |&nbsp;<i class="fas fa-users"></i>&nbsp;总访问人数:&nbsp;<span id="busuanzi_value_site_uv"
                    class="white-color"></span>&nbsp;人
            </span>
            
            <br>
            
            <br>
            
        </div>
        
    </div>
</footer>

<div class="progress-bar"></div>


    <!-- 搜索遮罩框 -->
<div id="searchModal" class="modal">
    <div class="modal-content">
        <div class="search-header">
            <span class="title"><i class="fas fa-search"></i>&nbsp;&nbsp;Search</span>
            <input type="search" id="searchInput" name="s" placeholder="Please enter a search keyword"
                   class="search-input">
        </div>
        <div id="searchResult"></div>
    </div>
</div>

<script src="/js/search.js"></script>
<script type="text/javascript">
$(function () {
    searchFunc("/" + "search.xml", 'searchInput', 'searchResult');
});
</script>
    <!-- 回到顶部按钮 -->
<div id="backTop" class="top-scroll">
    <a class="btn-floating btn-large waves-effect waves-light" href="#!">
        <i class="fas fa-arrow-up"></i>
    </a>
</div>


    <script src="/libs/materialize/materialize.min.js"></script>
    <script src="/libs/masonry/masonry.pkgd.min.js"></script>
    <script src="/libs/aos/aos.js"></script>
    <script src="/libs/scrollprogress/scrollProgress.min.js"></script>
    <script src="/libs/lightGallery/js/lightgallery-all.min.js"></script>
    <script src="/js/matery.js"></script>

    <!-- Global site tag (gtag.js) - Google Analytics -->


    <!-- Baidu Analytics -->

    <!-- Baidu Push -->

<script>
    (function () {
        var bp = document.createElement('script');
        var curProtocol = window.location.protocol.split(':')[0];
        if (curProtocol === 'https') {
            bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';
        } else {
            bp.src = 'http://push.zhanzhang.baidu.com/push.js';
        }
        var s = document.getElementsByTagName("script")[0];
        s.parentNode.insertBefore(bp, s);
    })();
</script>

    
    
    <script async src="/libs/others/busuanzi.pure.mini.js"></script>
    

    

    

    

    

    
    
    
    <script src="/libs/instantpage/instantpage.js" type="module"></script>
    

</body>
</html>
